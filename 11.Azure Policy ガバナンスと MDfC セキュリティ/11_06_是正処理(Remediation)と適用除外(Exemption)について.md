# 是正処理 (Remediation) と適用除外 (Exemption) について

ポリシーにより環境をチェックした結果として、非準拠（または異常）が見つかった場合には、是正処理（修正作業）を実施するか、適用を除外する必要があります。

## 用語について

是正処理と適用除外については、Azure Policy と MDfC で、利用している用語が異なること、また間違えやすい用語があるため、以下に整理します。

![picture 1](./images/801ac09ef401dbb4bb2aa8cfcf9b9809fa958ead35ee92ddb383b860439942a6.png)  

特に注意すべき点は、ポリシーの適用を除外（Exemption）する場合の理由付けです。ポリシーの適用除外（Exemption）は、以下の 2 つに分類されます。

- Mitigated (軽減済み)
  - 他の方法によりルールが実質的に充足されている、あるいは論理的に問題が起こりえない状況であるために、**当該ルールを適用する必要がない**、と判断される場合です。
- Waiver (免除)
  - **ルールは充足されていない**が、それによって生じるリスクを許容する、という場合です。よくあるケースは、本当はやった方が適切だが、PoC であるためにコストがかけられないのでやらないと判断するような場合です。

Exemption, Waiver, Mitigated には、それぞれ適用除外、軽減済み、免除という訳語が割り当てられていますが、これらの訳語は直感と必ずしもそぐわないところがあります。（例：「軽減済み」は、リスクは残っているけれどもリスクが軽減されているので OK とみなす＝Waiver に相当するような意味に解釈したり、「免除」を Exemption の意味で解釈してしまうような誤解が生じやすいです）

いずれの訳語を利用しても、人によって解釈がぶれやすく、誤解も生じやすいため、**敢えて英語表記のまま利用する** (Exemption, Mitigated, Waiver の用語を使う) のも一手です。本デモでは、Mitigated, Waiver の用語を積極的に利用しています。

## ポリシーの無効化

またポリシーによっては、「そもそもそのポリシーを無効化した方がよい」場合もあります。例えば以下のようなポリシーです。

- カスタムロールの作成
- エージェントの自動配布機能

これらのポリシーは、ずさんに設計された環境では意味のあるものです。しかし本デモでの環境設計の場合、厳密な権限分掌のためにカスタムロールを作成したり、厳密な環境管理のためにエージェントは手動セットアップを行ったりしていますので、むしろ邪魔なポリシーといえます。ですので、これらのポリシーは無効化する、という対応の方が適切です。

## 具体的な対応について

以上を踏まえて、Non Compliant (Unhealthy) 項目について、以下のいずれかの対応をしていきます。

- 是正処理 (Remediation) : リソースの問題を修正する
- 適用除外 (Exemption) - 軽減済み (Mitigated) : 実質的にルールが充足されている or そもそも問題が起こらない
- 適用除外 (Exemption) - 免除 (Waiver) : ルールは満たされていないが許容する
- ポリシーそのものの無効化 : 自社環境には適していないのでポリシーを無効化する

なお、Exemption と Remediation を効率的に行っていくため、組織として、適用除外ガイドラインや是正処理ライブラリを整備していくことをオススメします。ひな形となる Excel シートを readme.md に示しておきましたので、現場にてご活用ください。

![picture 1](./images/a9a3ee5d6e2771afa23e0a8e3bb85e6d6f1700d34e825836dc20e9f5b57ec578.png)  
